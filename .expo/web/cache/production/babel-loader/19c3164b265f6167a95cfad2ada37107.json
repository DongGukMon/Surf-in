{"ast":null,"code":"import _defineProperty2 from\"@babel/runtime/helpers/defineProperty\";import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly){symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});}keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty2(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};return _extends.apply(this,arguments);}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import React,{Component}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import Platform from\"react-native-web/dist/exports/Platform\";import Toast from\"./toast\";var dims=Dimensions.get(\"window\");var ToastContainer=function(_Component){_inherits(ToastContainer,_Component);var _super=_createSuper(ToastContainer);function ToastContainer(props){var _this;_classCallCheck(this,ToastContainer);_this=_super.call(this,props);_defineProperty(_assertThisInitialized(_this),\"show\",function(message,toastOptions){var id=(toastOptions===null||toastOptions===void 0?void 0:toastOptions.id)||Math.random().toString();var onDestroy=function onDestroy(){return _this.setState({toasts:_this.state.toasts.filter(function(t){return t.id!==id;})});};requestAnimationFrame(function(){_this.setState({toasts:_this.state.toasts.filter(function(t){return t.id!==id;})});_this.setState({toasts:[_objectSpread(_objectSpread({id:id,onDestroy:onDestroy,message:message,open:true,onHide:function onHide(){return _this.hide(id);}},_this.props),toastOptions)].concat(_toConsumableArray(_this.state.toasts))});});return id;});_defineProperty(_assertThisInitialized(_this),\"update\",function(id,message,toastOptions){_this.setState({toasts:_this.state.toasts.map(function(toast){return toast.id===id?_objectSpread(_objectSpread({},toast),{},{message:message},toastOptions):toast;})});});_defineProperty(_assertThisInitialized(_this),\"hide\",function(id){_this.setState({toasts:_this.state.toasts.map(function(t){return t.id===id?_objectSpread(_objectSpread({},t),{},{open:false}):t;})});});_defineProperty(_assertThisInitialized(_this),\"hideAll\",function(){_this.setState({toasts:_this.state.toasts.map(function(t){return _objectSpread(_objectSpread({},t),{},{open:false});})});});_this.state={toasts:[]};return _this;}_createClass(ToastContainer,[{key:\"renderBottomToasts\",value:function renderBottomToasts(){var toasts=this.state.toasts;var _this$props=this.props,offset=_this$props.offset,offsetBottom=_this$props.offsetBottom;var style={bottom:offsetBottom||offset,justifyContent:\"flex-end\",flexDirection:\"column\"};return React.createElement(KeyboardAvoidingView,{behavior:Platform.OS===\"ios\"?\"position\":undefined,style:[styles.container,style],pointerEvents:\"box-none\"},toasts.filter(function(t){return!t.placement||t.placement===\"bottom\";}).map(function(toast){return React.createElement(Toast,_extends({key:toast.id},toast));}));}},{key:\"renderTopToasts\",value:function renderTopToasts(){var toasts=this.state.toasts;var _this$props2=this.props,offset=_this$props2.offset,offsetTop=_this$props2.offsetTop;var style={top:offsetTop||offset,justifyContent:\"flex-start\",flexDirection:\"column-reverse\"};return React.createElement(KeyboardAvoidingView,{behavior:Platform.OS===\"ios\"?\"position\":undefined,style:[styles.container,style],pointerEvents:\"box-none\"},toasts.filter(function(t){return t.placement===\"top\";}).map(function(toast){return React.createElement(Toast,_extends({key:toast.id},toast));}));}},{key:\"render\",value:function render(){return React.createElement(React.Fragment,null,this.renderTopToasts(),this.renderBottomToasts());}}]);return ToastContainer;}(Component);_defineProperty(ToastContainer,\"defaultProps\",{placement:\"bottom\",offset:10});var styles=StyleSheet.create({container:_objectSpread({flex:0,position:\"absolute\",width:dims.width,maxWidth:dims.width,zIndex:999,left:0,right:0},Platform.OS===\"web\"?{overflow:\"hidden\"}:null),message:{color:\"#333\"}});export default ToastContainer;","map":{"version":3,"sources":["toast-container.tsx"],"names":["dims","Dimensions","ToastContainer","constructor","toasts","placement","offset","id","Math","onDestroy","t","requestAnimationFrame","message","open","onHide","toastOptions","toast","renderBottomToasts","offsetBottom","style","bottom","justifyContent","flexDirection","Platform","styles","renderTopToasts","offsetTop","top","render","container","flex","position","width","maxWidth","zIndex","left","right","overflow","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  Dimensions,\r\n  ViewStyle,\r\n  KeyboardAvoidingView,\r\n  Platform,\r\n} from \"react-native\";\r\nimport Toast, { ToastOptions, ToastProps } from \"./toast\";\r\n\r\nconst dims = Dimensions.get(\"window\");\r\n\r\nexport interface Props extends ToastOptions {\r\n  renderToast?(toast: ToastProps): JSX.Element;\r\n  renderType?: { [type: string]: (toast: ToastProps) => JSX.Element };\r\n  offset?: number;\r\n  offsetTop?: number;\r\n  offsetBottom?: number;\r\n}\r\n\r\ninterface State {\r\n  toasts: Array<ToastProps>;\r\n}\r\n\r\nclass ToastContainer extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      toasts: [],\r\n    };\r\n  }\r\n\r\n  static defaultProps = {\r\n    placement: \"bottom\",\r\n    offset: 10,\r\n  };\r\n\r\n  /**\r\n   * Shows a new toast. Returns id\r\n   */\r\n  show = (message: string | JSX.Element, toastOptions?: ToastOptions) => {\r\n    let id = toastOptions?.id || Math.random().toString();\r\n    const onDestroy = () =>\r\n      this.setState({ toasts: this.state.toasts.filter((t) => t.id !== id) });\r\n\r\n    requestAnimationFrame(() => {\r\n      this.setState({ toasts: this.state.toasts.filter((t) => t.id !== id) });\r\n      this.setState({\r\n        toasts: [\r\n          {\r\n            id,\r\n            onDestroy,\r\n            message,\r\n            open: true,\r\n            onHide: () => this.hide(id),\r\n            ...this.props,\r\n            ...toastOptions,\r\n          },\r\n          ...this.state.toasts,\r\n        ],\r\n      });\r\n    });\r\n\r\n    return id;\r\n  };\r\n\r\n  /**\r\n   * Updates a toast, To use this create you must pass an id to show method first, then pass it here to update the toast.\r\n   */\r\n  update = (\r\n    id: string,\r\n    message: string | JSX.Element,\r\n    toastOptions?: ToastOptions\r\n  ) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((toast) =>\r\n        toast.id === id ? { ...toast, message, ...toastOptions } : toast\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes a toast from stack\r\n   */\r\n  hide = (id: string) => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) =>\r\n        t.id === id ? { ...t, open: false } : t\r\n      ),\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Removes all toasts in stack\r\n   */\r\n  hideAll = () => {\r\n    this.setState({\r\n      toasts: this.state.toasts.map((t) => ({ ...t, open: false })),\r\n    });\r\n  };\r\n\r\n  renderBottomToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetBottom } = this.props;\r\n    let style: ViewStyle = {\r\n      bottom: offsetBottom || offset,\r\n      justifyContent: \"flex-end\",\r\n      flexDirection: \"column\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => !t.placement || t.placement === \"bottom\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  renderTopToasts() {\r\n    const { toasts } = this.state;\r\n    let { offset, offsetTop } = this.props;\r\n    let style: ViewStyle = {\r\n      top: offsetTop || offset,\r\n      justifyContent: \"flex-start\",\r\n      flexDirection: \"column-reverse\",\r\n    };\r\n    return (\r\n      <KeyboardAvoidingView\r\n        behavior={Platform.OS === \"ios\" ? \"position\" : undefined}\r\n        style={[styles.container, style]}\r\n        pointerEvents=\"box-none\"\r\n      >\r\n        {toasts\r\n          .filter((t) => t.placement === \"top\")\r\n          .map((toast) => (\r\n            <Toast key={toast.id} {...toast} />\r\n          ))}\r\n      </KeyboardAvoidingView>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {this.renderTopToasts()}\r\n        {this.renderBottomToasts()}\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 0,\r\n    position: \"absolute\",\r\n    width: dims.width,\r\n    maxWidth: dims.width,\r\n    zIndex: 999,\r\n    left: 0,\r\n    right: 0,\r\n    ...(Platform.OS === \"web\" ? { overflow: \"hidden\" } : null),\r\n  },\r\n  message: {\r\n    color: \"#333\",\r\n  },\r\n});\r\n\r\nexport default ToastContainer;\r\n"]},"metadata":{},"sourceType":"module"}